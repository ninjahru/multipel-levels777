scene.onOverlapTile(SpriteKind.Player, assets.tile`tile`, function (sprite, location) {
    level += 1
    gameStarting()
})
function gameStarting () {
    if (level == 0) {
        tiles.setTilemap(tilemap`level1`)
    }
    if (level == 1) {
        tiles.setTilemap(tilemap`level3`)
    }
    for (let value of tiles.getTilesByType(assets.tile`tile0`)) {
        tiles.placeOnRandomTile(mySprite, assets.tile`tile0`)
    }
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile4`, function (sprite, location) {
    mySprite.destroy()
    game.over(false)
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    mySprite2.destroy()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    mySprite.destroy()
    game.over(false)
})
let projectile: Sprite = null
let mySprite2: Sprite = null
let mySprite: Sprite = null
let level = 0
scene.setBackgroundColor(9)
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    .................................................................................5..............................................................................
    ....................................................................5............5..............................................................................
    .....................................................................5..........5...............................................................................
    .....................................................................5..........................................................................................
    .....................................................................5..........................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ........................................................................................55......................................................................
    .....................................................................................555.........................................8888...........................
    ........................................................5...........555555555.......5......................................888..8....88.........................
    ........................................................55..........5........5...........................................88..888......88........................
    ..........................................................55.......55.........5.......................................888.....88.......8........................
    ...........................................................55......5..........5...........................88888888...8.................88.......................
    ...................................................................5..........55..........................8......8888...................8.......................
    ..................................................................55...........5.........................8........88....................8.......................
    ..................................................................5............5.........................8.........8....................8.......................
    ..................................................................55...........5.........................8..............................8.......................
    ...................................................................55.........55.......5.................8..............................8.......................
    ....................................................................55.......55.........5................88.............................8.......................
    .....................................................................555555555...........5................8.............................8.......................
    ....................................8888888...............................................5...............8............................88.......................
    .............................8888..88.....88...............................................................8..........................88........................
    ..........................888....888........8...............................................................88...................88888..........................
    ...................888...8........88........8................................................................88888888888888888888...............................
    ..................88..88.8..................88......................5...........................................................................................
    .................8......88...................8......................5........5..................................................................................
    ................8........8..................88.....................5.........5..................................................................................
    ................88.........................88.....................5..........5..................................................................................
    ................88..............888.....8888.....................5...........5..................................................................................
    .................8..............8.888888........................5...............................................................................................
    .................88............88...............................5...............................................................................................
    ..................888.........88................................................................................................................................
    ....................888...8888..................................................................................................................................
    ......................88888.....................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ...........................................................................................................................................................3....
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
level = 0
mySprite = sprites.create(img`
    ....ffffff..............
    ..ffeeeef2f.............
    .ffeeeef222f............
    .feeeffeeeef............
    .ffffee2222ef...........
    .fe222ffffe2f...........
    fffffffeeefff...........
    ffe44ebf44eef...........
    fee4d41fddef............
    .feee4ddddf.............
    ..fdde444ef.............
    ..fdde22ccc.............
    ...eef22cdc.............
    ...f4444cddc............
    ....fffffcddc...........
    .....fff..cddc..........
    ...........cdc..........
    ............cc..........
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Player)
controller.moveSprite(mySprite, 80, 0)
gameStarting()
game.onUpdateInterval(7000, function () {
    mySprite2 = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . c c . . c c . . . . . . . . 
        . . c 3 c c 3 c c c . . . . . . 
        . c b 3 b c 3 b c c c . . . . . 
        . c b b b b b b b b f f . . . . 
        c c b b b b b b b b f f . . . . 
        c b 1 b b b 1 b b c f f f . . . 
        c b b b b b b b b f f f f . . . 
        f b c b b b c b c c b b b . . . 
        f b 1 f f f 1 b f c c c c . . . 
        . f b b b b b b f b b c c . . . 
        c c f b b b b b c c b b c . . . 
        c c c f f f f f f c c b b c . . 
        . c c c . . . . . . c c c c c . 
        . . c c c . . . . . . . c c c c 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Enemy)
    mySprite2.setPosition(148, 94)
    mySprite2.follow(mySprite, 40)
    mySprite2.setFlag(SpriteFlag.BounceOnWall, true)
})
game.onUpdateInterval(100, function () {
    mySprite.setVelocity(0, 100)
    scene.cameraFollowSprite(mySprite)
    if (controller.A.isPressed()) {
        mySprite.setVelocity(0, -104)
    }
})
game.onUpdateInterval(100, function () {
    if (controller.B.isPressed()) {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . 2 2 2 2 2 2 2 2 2 2 . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 50, 0)
    }
})
